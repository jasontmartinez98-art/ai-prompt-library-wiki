<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI Shift Assistant — Handoffs & Summaries</title>
<style>
  :root{
    --bg:#f6f8fc; --card:#ffffff; --ink:#111827; --muted:#5b6472;
    --line:#e5e9f3; --accent:#2563eb; --accent-soft:#e8efff;
    --good:#16a34a; --warn:#f59e0b; --bad:#ef4444; --shadow:0 10px 24px rgba(15,23,42,.06);
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;background:radial-gradient(1200px 600px at 20% -10%, #eef3ff, transparent), var(--bg);color:var(--ink)}
  .wrap{max-width:980px;margin:0 auto;padding:16px 12px 32px}
  header{display:flex;justify-content:space-between;align-items:center;margin:6px 0 12px;color:var(--muted);font-size:.9rem}
  header a{color:var(--accent);text-decoration:none}
  header a:hover{text-decoration:underline}

  .hero{background:linear-gradient(135deg,#1d4ed8,#6366f1);color:#fff;border-radius:14px;padding:18px;box-shadow:var(--shadow);display:grid;gap:10px}
  .hero h1{margin:0;font-size:1.6rem;letter-spacing:.2px}
  .hero p{margin:0;color:#e6ecff}
  .hero .meta{font-size:.85rem;opacity:.95}
  .row{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px}
  .pill{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.35);border-radius:999px;padding:4px 10px;font-size:.8rem}

  .tabs{margin-top:16px;display:flex;gap:6px;flex-wrap:wrap}
  .tabbtn{flex:1 0 180px;background:#fff;border:1px solid var(--line);padding:10px 12px;border-radius:10px;cursor:pointer;color:var(--ink);box-shadow:var(--shadow);text-align:center}
  .tabbtn.active{background:var(--accent);border-color:transparent;color:#fff}
  .panel{margin-top:12px;background:var(--card);border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);padding:12px}

  .controls{display:grid;grid-template-columns:1fr;gap:10px}
  @media (min-width:720px){.controls{grid-template-columns:1fr 1fr}}
  label{font-size:.9rem;color:var(--muted)}
  select,textarea,input[type="text"]{width:100%;padding:10px;border:1px solid var(--line);border-radius:10px;background:#fff;font:inherit}
  textarea{min-height:160px;resize:vertical}

  .btns{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .btn{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:10px 12px;cursor:pointer}
  .btn.alt{background:#fff;color:var(--accent);border:1px solid var(--accent)}
  .btn.gray{background:#f3f4f6;color:#111;border:1px solid var(--line)}
  .btn.warn{background:var(--warn);color:#111}

  .grid{display:grid;grid-template-columns:1fr;gap:10px;margin-top:12px}
  @media (min-width:860px){.grid{grid-template-columns:1fr 1fr}}
  .card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px}
  .card h3{margin:0 0 4px;font-size:1rem}
  .meta{color:var(--muted);font-size:.85rem}

  .events{margin-top:6px;background:#fff;border:1px dashed var(--line);border-radius:12px;padding:10px}
  .evlist{display:flex;flex-direction:column;gap:6px;margin-top:6px}
  .evitem{display:flex;justify-content:space-between;align-items:center;border:1px solid var(--line);border-radius:10px;padding:8px}
  .small{font-size:.85rem;color:var(--muted)}
  .footer{margin-top:18px;color:var(--muted);font-size:.85rem;display:flex;justify-content:space-between;gap:8px;flex-wrap:wrap}
  code.box{display:block;white-space:pre-wrap;background:#f6f7fb;border:1px solid var(--line);border-radius:10px;padding:10px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:.9rem}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>● <span class="small">AI Shift Assistant · Internal Tool</span></div>
      <div><a href="./index.html">← Back to AI Prompt Wiki</a></div>
    </header>

    <section class="hero">
      <div>
        <h1>AI Shift Assistant</h1>
        <p>Generate clean handoffs and team summaries from raw notes or ticket exports.</p>
        <div class="row">
          <span class="pill">7–3 · 12–9 · Overnight</span>
          <span class="pill">Copy to Email / Teams</span>
          <span class="pill">Download as Markdown</span>
        </div>
        <div class="meta" id="clock">Today — </div>
      </div>
    </section>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tabbtn active" data-tab="tech">Technician Handoff</button>
      <button class="tabbtn" data-tab="mgr">Manager Team Summary</button>
      <button class="tabbtn" data-tab="brief">Morning Brief</button>
    </div>

    <!-- Ongoing Events / Announcements (persisted locally) -->
    <div class="events">
      <strong>Ongoing Events / Announcements</strong> <span class="small">(saved on this device)</span>
      <div class="controls">
        <input id="evText" type="text" placeholder="e.g., HR onboarding this week · Printer refresh project" />
        <div class="btns">
          <button class="btn alt" id="addEv">Add Event</button>
          <button class="btn gray" id="clrEv">Clear All</button>
        </div>
      </div>
      <div id="evList" class="evlist"></div>
    </div>

    <!-- Panels -->
    <div id="tech" class="panel">
      <div class="controls">
        <div>
          <label>Shift</label>
          <select id="techShift">
            <option>7am–3pm</option>
            <option selected>12pm–9pm</option>
            <option>Overnight (9pm–7am)</option>
          </select>
        </div>
        <div>
          <label>Location / Site (optional)</label>
          <input id="techSite" type="text" placeholder="e.g., HQ · Floor 3 · Charlotte" />
        </div>
      </div>
      <div class="controls" style="margin-top:8px">
        <div>
          <label>Paste today’s notes or ticket IDs</label>
          <textarea id="techInput" placeholder="- Resolved VPN reset for M. Patel
- 3x laptop imaging (Finance)
- Waiting on network for switch port
- VIP: A. Rivera laptop swap
- Printer 3rd floor mapping…"></textarea>
        </div>
      </div>
      <div class="btns">
        <button class="btn" id="genTech">Generate Handoff</button>
        <button class="btn alt" id="copyTech">Copy</button>
        <button class="btn gray" id="emailTech">Copy as Email</button>
        <button class="btn gray" id="teamsTech">Copy as Teams</button>
        <button class="btn warn" id="dlTech">Download .md</button>
      </div>

      <div class="grid">
        <div class="card">
          <h3>Shift Handoff (internal)</h3>
          <div class="meta" id="techMeta"></div>
          <code class="box" id="techOut">—</code>
        </div>
        <div class="card">
          <h3>Metrics & Focus</h3>
          <div class="meta small">Auto-extracted (best-effort)</div>
          <code class="box" id="techKpi">—</code>
        </div>
      </div>
    </div>

    <div id="mgr" class="panel" style="display:none">
      <div class="controls">
        <div>
          <label>Shift</label>
          <select id="mgrShift">
            <option>7am–3pm</option>
            <option selected>12pm–9pm</option>
            <option>Overnight (9pm–7am)</option>
          </select>
        </div>
        <div>
          <label>Paste multiple technician handoffs (separate with a blank line)</label>
          <textarea id="mgrInput" placeholder="(Handoff #1)
• 8 tickets closed…
• VIP…

(Handoff #2)
• 12 tickets closed…
• Ongoing…"></textarea>
        </div>
      </div>
      <div class="btns">
        <button class="btn" id="genMgr">Generate Team Summary</button>
        <button class="btn alt" id="copyMgr">Copy</button>
        <button class="btn gray" id="emailMgr">Copy as Email</button>
        <button class="btn gray" id="teamsMgr">Copy as Teams</button>
        <button class="btn warn" id="dlMgr">Download .md</button>
      </div>

      <div class="grid">
        <div class="card">
          <h3>Team Daily Summary</h3>
          <div class="meta" id="mgrMeta"></div>
          <code class="box" id="mgrOut">—</code>
        </div>
        <div class="card">
          <h3>Top Issues & Risks</h3>
          <code class="box" id="mgrKpi">—</code>
        </div>
      </div>
    </div>

    <div id="brief" class="panel" style="display:none">
      <div class="controls">
        <div>
          <label>Paste yesterday’s team summary</label>
          <textarea id="briefInput" placeholder="Team Summary — Mon Nov 12
Tickets Closed: 46 …
Escalations: …"></textarea>
        </div>
      </div>
      <div class="btns">
        <button class="btn" id="genBrief">Generate Morning Brief</button>
        <button class="btn alt" id="copyBrief">Copy</button>
        <button class="btn gray" id="emailBrief">Copy as Email</button>
        <button class="btn gray" id="teamsBrief">Copy as Teams</button>
        <button class="btn warn" id="dlBrief">Download .md</button>
      </div>

      <div class="grid">
        <div class="card">
          <h3>Email Draft (Leadership)</h3>
          <code class="box" id="briefEmail">—</code>
        </div>
        <div class="card">
          <h3>Teams/Slack Post</h3>
          <code class="box" id="briefTeams">—</code>
        </div>
      </div>
    </div>

    <div class="footer">
      <div>Part of Jason Martinez’s AI Enablement Toolkit</div>
      <div><a href="./ticket-assistant-demo.html">AI Ticket Assistant Demo →</a></div>
    </div>
  </div>

<script>
(function(){
  // Clock
  const clock = document.getElementById('clock');
  function fmtNow(){
    const d = new Date();
    const opts = {weekday:'short', year:'numeric', month:'short', day:'numeric', hour:'2-digit', minute:'2-digit'};
    return d.toLocaleString(undefined, opts);
  }
  clock.textContent = `Today — ${fmtNow()}`;

  // Tabs
  const tabs = document.querySelectorAll('.tabbtn');
  const panels = { tech:document.getElementById('tech'), mgr:document.getElementById('mgr'), brief:document.getElementById('brief') };
  tabs.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      tabs.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const id = btn.dataset.tab;
      Object.entries(panels).forEach(([k,el])=>{ el.style.display = (k===id)?'block':'none'; });
    });
  });

  // Ongoing Events (localStorage)
  const evKey = 'aiShiftEvents';
  const evText = document.getElementById('evText');
  const evList = document.getElementById('evList');
  const addEv = document.getElementById('addEv');
  const clrEv = document.getElementById('clrEv');

  function loadEvents(){
    const arr = JSON.parse(localStorage.getItem(evKey)||'[]');
    evList.innerHTML = '';
    arr.forEach((t,idx)=>{
      const row = document.createElement('div');
      row.className = 'evitem';
      row.innerHTML = `<span>${escapeHtml(t)}</span><button class="btn gray" data-i="${idx}">Remove</button>`;
      row.querySelector('button').addEventListener('click', ()=>{
        const cur = JSON.parse(localStorage.getItem(evKey)||'[]');
        cur.splice(idx,1);
        localStorage.setItem(evKey, JSON.stringify(cur));
        loadEvents();
      });
      evList.appendChild(row);
    });
  }
  addEv.addEventListener('click', ()=>{
    const v = evText.value.trim();
    if(!v) return;
    const arr = JSON.parse(localStorage.getItem(evKey)||'[]');
    arr.push(v);
    localStorage.setItem(evKey, JSON.stringify(arr));
    evText.value = '';
    loadEvents();
  });
  clrEv.addEventListener('click', ()=>{
    localStorage.removeItem(evKey);
    loadEvents();
  });
  loadEvents();

  // Utility
  function escapeHtml(s){ return s.replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;' }[m])); }
  function copyText(text){
    navigator.clipboard.writeText(text).then(()=>{}).catch(()=>{});
  }
  function download(name, content){
    const blob = new Blob([content], {type:'text/markdown;charset=utf-8'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob); a.download = name; a.click();
    setTimeout(()=>URL.revokeObjectURL(a.href), 500);
  }
  function getEventsBlock(){
    const ev = JSON.parse(localStorage.getItem(evKey)||'[]');
    if(!ev.length) return '';
    return `Ongoing Events:\n${ev.map(e=>`• ${e}`).join('\n')}\n`;
  }
  function countByKeywords(text){
    const kw = {hardware:0, software:0, access:0, network:0, vpn:0, outlook:0, printer:0, imaging:0};
    const t = text.toLowerCase();
    Object.keys(kw).forEach(k=>{
      const re = new RegExp(`\\b${k}\\b`,'g'); kw[k] = (t.match(re)||[]).length;
    });
    const total = (text.match(/\n|^-/g)||[]).length + (text.trim()?1:0);
    return {total, kw};
  }
  function bulletize(text){
    return text.split(/\n+/).map(s=>s.trim()).filter(Boolean).map(s=>`• ${s}`).join('\n');
  }

  // TECH HANDOFF
  const techShift = document.getElementById('techShift');
  const techSite = document.getElementById('techSite');
  const techInput = document.getElementById('techInput');
  const techOut = document.getElementById('techOut');
  const techKpi = document.getElementById('techKpi');
  const techMeta = document.getElementById('techMeta');

  document.getElementById('genTech').addEventListener('click', ()=>{
    const shift = techShift.value;
    const site = techSite.value.trim();
    const notes = techInput.value.trim();
    const now = fmtNow();
    const events = getEventsBlock();
    const {total, kw} = countByKeywords(notes);

    techMeta.textContent = `${now} · ${shift}${site?` · ${site}`:''}`;

    const handoff =
`Shift Handoff — ${now}
Shift: ${shift}${site?` · Site: ${site}`:''}

Summary:
${bulletize(notes || '—')}

Next Shift Focus:
• Confirm resolutions and follow-ups
• Recheck any escalations or pending approvals

Blocked / Waiting:
• (Add blockers here)

${events}`.trim();

    const kpi =
`Tickets/Lines Mentioned: ${total}
Top Categories (best-effort keyword scan):
• Hardware: ${kw.hardware}   • Software: ${kw.software}
• Access: ${kw.access}       • Network: ${kw.network}
• VPN: ${kw.vpn}             • Outlook: ${kw.outlook}
• Printer: ${kw.printer}     • Imaging: ${kw.imaging}`.trim();

    techOut.textContent = handoff;
    techKpi.textContent = kpi;
  });

  document.getElementById('copyTech').addEventListener('click', ()=> copyText(techOut.textContent));
  document.getElementById('emailTech').addEventListener('click', ()=>{
    const subject = encodeURIComponent('Shift Handoff');
    const body = encodeURIComponent(techOut.textContent);
    window.location.href = `mailto:?subject=${subject}&body=${body}`;
  });
  document.getElementById('teamsTech').addEventListener('click', ()=>{
    copyText(techOut.textContent + '\n\n— copied for Teams/Slack');
  });
  document.getElementById('dlTech').addEventListener('click', ()=>{
    download('shift-handoff.md', techOut.textContent + '\n');
  });

  // MANAGER SUMMARY
  const mgrShift = document.getElementById('mgrShift');
  const mgrInput = document.getElementById('mgrInput');
  const mgrOut = document.getElementById('mgrOut');
  const mgrKpi = document.getElementById('mgrKpi');
  const mgrMeta = document.getElementById('mgrMeta');

  document.getElementById('genMgr').addEventListener('click', ()=>{
    const shift = mgrShift.value;
    const blob = mgrInput.value.trim();
    const now = fmtNow();
    const events = getEventsBlock();

    mgrMeta.textContent = `${now} · ${shift}`;

    const blocks = blob.split(/\n\s*\n/).map(s=>s.trim()).filter(Boolean);
    const totals = {tickets:0, hardware:0, software:0, access:0, network:0, vpn:0, outlook:0, printer:0, imaging:0};

    blocks.forEach(b=>{
      const c = countByKeywords(b);
      totals.tickets += c.total;
      Object.keys(c.kw).forEach(k=> totals[k] += c.kw[k]);
    });

    const topIssues = Object.entries(totals)
      .filter(([k])=>['hardware','software','access','network','vpn','outlook','printer','imaging'].includes(k))
      .sort((a,b)=>b[1]-a[1]).slice(0,3)
      .map(([k,v])=>`${k} (${v})`).join(', ');

    const team =
`Team Summary — ${now}
Shift: ${shift}

Highlights:
• ${blocks.length} handoff(s) received
• Approx. ${totals.tickets} ticket lines mentioned

Top Issues (keyword scan):
• ${topIssues || '—'}

Escalations / Risks:
• (Add escalations here)

Actions for Next Shift:
• (Add next actions here)

${events}`.trim();

    const kpi =
`Aggregate Counts (best-effort):
• Hardware: ${totals.hardware}  • Software: ${totals.software}
• Access: ${totals.access}      • Network: ${totals.network}
• VPN: ${totals.vpn}            • Outlook: ${totals.outlook}
• Printer: ${totals.printer}    • Imaging: ${totals.imaging}`.trim();

    mgrOut.textContent = team;
    mgrKpi.textContent = kpi;
  });

  document.getElementById('copyMgr').addEventListener('click', ()=> copyText(mgrOut.textContent));
  document.getElementById('emailMgr').addEventListener('click', ()=>{
    const subject = encodeURIComponent('Team Daily Summary');
    const body = encodeURIComponent(mgrOut.textContent);
    window.location.href = `mailto:?subject=${subject}&body=${body}`;
  });
  document.getElementById('teamsMgr').addEventListener('click', ()=>{
    copyText(mgrOut.textContent + '\n\n— copied for Teams/Slack');
  });
  document.getElementById('dlMgr').addEventListener('click', ()=> download('team-summary.md', mgrOut.textContent + '\n'));

  // MORNING BRIEF
  const briefInput = document.getElementById('briefInput');
  const briefEmail = document.getElementById('briefEmail');
  const briefTeams = document.getElementById('briefTeams');

  document.getElementById('genBrief').addEventListener('click', ()=>{
    const src = briefInput.value.trim();
    const now = fmtNow();
    const events = getEventsBlock();

    const email =
`Subject: Deskside Morning Brief — ${now}

Good morning,

Here’s a quick recap of deskside support activity and priorities:

${src || '• (Paste yesterday’s summary here)'}

${events ? events : ''}
Regards,
Deskside Support`.trim();

    const teams =
`Good morning — ${now}
${src ? src : '• (Yesterday’s summary goes here)'}
${events ? '\n' + events : ''}Thanks team!`.trim();

    briefEmail.textContent = email;
    briefTeams.textContent = teams;
  });

  document.getElementById('copyBrief').addEventListener('click', ()=> copyText(briefEmail.textContent + '\n\n' + briefTeams.textContent));
  document.getElementById('emailBrief').addEventListener('click', ()=>{
    const subject = encodeURIComponent('Deskside Morning Brief');
    const body = encodeURIComponent(briefEmail.textContent);
    window.location.href = `mailto:?subject=${subject}&body=${body}`;
  });
  document.getElementById('teamsBrief').addEventListener('click', ()=>{
    copyText(briefTeams.textContent);
  });
  document.getElementById('dlBrief').addEventListener('click', ()=> download('morning-brief.md', briefEmail.textContent + '\n\n---\n\n' + briefTeams.textContent + '\n'));
})();
</script>
</body>
</html>
