<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI Shift Assistant — Huddles & Handoffs</title>
<style>
  :root{
    --bg:#f6f8fc; --card:#ffffff; --ink:#111827; --muted:#5b6472;
    --line:#e5e9f3; --accent:#2563eb; --accent-soft:#e8efff;
    --shadow:0 10px 24px rgba(15,23,42,.06);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
    background:radial-gradient(1200px 600px at 20% -10%, #eef3ff, transparent), var(--bg);
    color:var(--ink);
  }
  .wrap{max-width:980px;margin:0 auto;padding:16px 12px 32px}
  header{
    display:flex;justify-content:space-between;align-items:center;
    margin:6px 0 12px;color:var(--muted);font-size:.9rem
  }
  header a{color:var(--accent);text-decoration:none}
  header a:hover{text-decoration:underline}

  .hero{
    background:linear-gradient(135deg,#1d4ed8,#6366f1);
    color:#fff;border-radius:14px;padding:18px;
    box-shadow:var(--shadow);display:grid;gap:10px
  }
  .hero h1{margin:0;font-size:1.6rem;letter-spacing:.2px}
  .hero p{margin:0;color:#e6ecff}
  .hero .meta{font-size:.85rem;opacity:.95;margin-top:4px}
  .row{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  .pill{
    background:rgba(255,255,255,.12);
    border:1px solid rgba(255,255,255,.35);
    border-radius:999px;padding:4px 10px;font-size:.8rem
  }

  .tabs{margin-top:16px;display:flex;gap:6px;flex-wrap:wrap}
  .tabbtn{
    flex:1 0 160px;
    background:#fff;border:1px solid var(--line);
    padding:9px 10px;border-radius:999px;
    cursor:pointer;color:var(--ink);
    box-shadow:var(--shadow);
    text-align:center;font-size:.9rem
  }
  .tabbtn.active{background:var(--accent);border-color:transparent;color:#fff}

  .panel{
    margin-top:12px;background:var(--card);
    border:1px solid var(--line);border-radius:14px;
    box-shadow:var(--shadow);padding:12px
  }

  .controls{display:grid;grid-template-columns:1fr;gap:10px}
  @media (min-width:720px){.controls{grid-template-columns:1fr 1fr}}
  label{font-size:.9rem;color:var(--muted)}
  select,textarea,input[type="text"]{
    width:100%;padding:10px;border:1px solid var(--line);
    border-radius:10px;background:#fff;font:inherit
  }
  textarea{min-height:160px;resize:vertical}

  .btns{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .btn{
    background:var(--accent);color:#fff;border:none;
    border-radius:10px;padding:9px 11px;cursor:pointer;font-size:.9rem
  }
  .btn.alt{background:#fff;color:var(--accent);border:1px solid var(--accent)}
  .btn.gray{background:#f3f4f6;color:#111;border:1px solid var(--line)}
  .btn.warn{background:#fee2e2;color:#b91c1c;border:1px solid #fecaca}

  .out-card{
    margin-top:10px;background:#fff;border:1px solid var(--line);
    border-radius:12px;padding:10px
  }
  .out-card h3{margin:0 0 4px;font-size:1rem}
  .meta-line{font-size:.8rem;color:var(--muted);margin-bottom:6px}
  code.box{
    display:block;white-space:pre-wrap;background:#f6f7fb;
    border:1px solid var(--line);border-radius:10px;
    padding:10px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;
    font-size:.9rem
  }

  .footer{
    margin-top:18px;color:var(--muted);font-size:.85rem;
    display:flex;justify-content:space-between;gap:8px;flex-wrap:wrap
  }
  .footer a{color:var(--accent);text-decoration:none}
  .small{font-size:.85rem;color:var(--muted)}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>● <span class="small">AI Shift Assistant · Internal Tool</span></div>
      <div><a href="./index.html">← Back to AI Prompt Wiki</a></div>
    </header>

    <section class="hero">
      <div>
        <h1>AI Shift Assistant</h1>
        <p>Turn team huddle notes and end-of-shift updates into clean, shareable summaries.</p>
        <div class="row">
          <span class="pill">Morning · Afternoon · Overnight</span>
          <span class="pill">Huddles · Handoffs · Manager View</span>
        </div>
        <div class="meta" id="clock">Today — </div>
      </div>
    </section>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tabbtn active" data-tab="huddle">Team Huddle</button>
      <button class="tabbtn" data-tab="handoff">Shift Handoff</button>
      <button class="tabbtn" data-tab="manager">Manager Summary</button>
    </div>

    <!-- TEAM HUDDLE -->
    <div id="huddle" class="panel">
      <div class="controls">
        <div>
          <label>Huddle</label>
          <select id="huddleShift">
            <option>Morning (7am–3pm)</option>
            <option>Afternoon (12pm–9pm)</option>
            <option>Overnight (9pm–7am)</option>
          </select>
        </div>
        <div>
          <label>Location / Site (optional)</label>
          <input id="huddleSite" type="text" placeholder="e.g., HQ · Floor 3 · Charlotte" />
        </div>
      </div>
      <div style="margin-top:8px">
        <label>Paste what each tech shared in huddle</label>
        <textarea id="huddleInput" placeholder="Jason — Imaging (2 pending), VPN follow-ups
Taylor — VIP setup for CFO, blocked on hardware
Sam — Waiting on Network for switch ports"></textarea>
      </div>
      <div class="btns">
        <button class="btn" id="genHuddle">Generate Huddle Summary</button>
        <button class="btn alt" id="copyHuddle">Copy</button>
        <button class="btn gray" id="copyHuddleEmail">Copy Email Version</button>
        <button class="btn gray" id="copyHuddleTeams">Copy Teams Version</button>
        <button class="btn warn" id="dlHuddle">Download .md</button>
      </div>

      <div class="out-card">
        <h3>Huddle Summary</h3>
        <div class="meta-line" id="huddleMeta"></div>
        <code class="box" id="huddleOut">—</code>
      </div>
    </div>

    <!-- SHIFT HANDOFF -->
    <div id="handoff" class="panel" style="display:none">
      <div class="controls">
        <div>
          <label>Shift</label>
          <select id="handoffShift">
            <option>Morning (7am–3pm)</option>
            <option>Afternoon (12pm–9pm)</option>
            <option>Overnight (9pm–7am)</option>
          </select>
        </div>
        <div>
          <label>Location / Site (optional)</label>
          <input id="handoffSite" type="text" placeholder="e.g., HQ · Floor 3 · Charlotte" />
        </div>
      </div>
      <div style="margin-top:8px">
        <label>Paste what was completed / still open / blocked this shift</label>
        <textarea id="handoffInput" placeholder="Completed: VPN resets, 2x laptop imaging
Pending: Network switch port ticket
Blocked: Waiting on hardware delivery"></textarea>
      </div>
      <div class="btns">
        <button class="btn" id="genHandoff">Generate Shift Handoff</button>
        <button class="btn alt" id="copyHandoff">Copy</button>
        <button class="btn gray" id="copyHandoffEmail">Copy Email Version</button>
        <button class="btn gray" id="copyHandoffTeams">Copy Teams Version</button>
        <button class="btn warn" id="dlHandoff">Download .md</button>
      </div>

      <div class="out-card">
        <h3>Shift Handoff</h3>
        <div class="meta-line" id="handoffMeta"></div>
        <code class="box" id="handoffOut">—</code>
      </div>
    </div>

    <!-- MANAGER SUMMARY -->
    <div id="manager" class="panel" style="display:none">
      <div>
        <label>Paste all shift handoffs (Morning, Afternoon, Overnight). Leave a blank line between each.</label>
        <textarea id="managerInput" placeholder="(Morning Handoff)
• Imaging for Finance...
• VPN reset...

(Afternoon Handoff)
• VIP setup for CFO...
• Hardware delay...

(Overnight Handoff)
• Printer outages...
• INC-10428 escalated..."></textarea>
      </div>
      <div class="btns">
        <button class="btn" id="genManager">Generate Manager Summary</button>
        <button class="btn alt" id="copyManager">Copy</button>
        <button class="btn gray" id="copyManagerEmail">Copy Email Version</button>
        <button class="btn gray" id="copyManagerTeams">Copy Teams Version</button>
        <button class="btn warn" id="dlManager">Download .md</button>
      </div>

      <div class="out-card">
        <h3>Daily Deskside Summary</h3>
        <div class="meta-line" id="managerMeta"></div>
        <code class="box" id="managerOut">—</code>
      </div>
    </div>

    <div class="footer">
      <div>Part of Jason Martinez’s AI Enablement Toolkit</div>
      <div><a href="./ticket-assistant-demo.html">AI Ticket Assistant Demo →</a></div>
    </div>
  </div>

<script>
(function(){
  // Clock
  const clock = document.getElementById('clock');
  function fmtNow(){
    const d = new Date();
    const opts = {
      weekday:'short', year:'numeric', month:'short', day:'numeric',
      hour:'2-digit', minute:'2-digit'
    };
    return d.toLocaleString(undefined, opts);
  }
  clock.textContent = `Today — ${fmtNow()}`;

  // Tabs
  const tabs = document.querySelectorAll('.tabbtn');
  const panels = {
    huddle: document.getElementById('huddle'),
    handoff: document.getElementById('handoff'),
    manager: document.getElementById('manager')
  };
  tabs.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      tabs.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const id = btn.dataset.tab;
      Object.entries(panels).forEach(([k,el])=>{
        el.style.display = (k===id) ? 'block' : 'none';
      });
    });
  });

  // Utils
  function copyText(text){
    if(!text || text === '—') return;
    navigator.clipboard.writeText(text).catch(()=>{});
  }
  function download(name, content){
    if(!content || content === '—') return;
    const blob = new Blob([content], {type:'text/markdown;charset=utf-8'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = name;
    a.click();
    setTimeout(()=>URL.revokeObjectURL(a.href), 500);
  }
  function bulletize(text){
    return text
      .split(/\n+/)
      .map(s=>s.trim())
      .filter(Boolean)
      .map(s=>{
        if(s.startsWith('-') || s.startsWith('•')) return s.replace(/^[-•]\s*/, '• ');
        return `• ${s}`;
      })
      .join('\n');
  }

  // TEAM HUDDLE LOGIC
  const huddleShift = document.getElementById('huddleShift');
  const huddleSite  = document.getElementById('huddleSite');
  const huddleInput = document.getElementById('huddleInput');
  const huddleMeta  = document.getElementById('huddleMeta');
  const huddleOut   = document.getElementById('huddleOut');

  function buildHuddle(){
    const shift = huddleShift.value;
    const site  = huddleSite.value.trim();
    const raw   = huddleInput.value.trim();
    const now   = fmtNow();

    huddleMeta.textContent = `${now} · ${shift}${site?` · ${site}`:''}`;

    const updates = raw ? raw.split(/\n+/).map(l=>l.trim()).filter(Boolean) : [];
    const bul = updates.length ? updates.map(line=>{
      // Try split on "—" or "-"
      const parts = line.split(/—|-/);
      if(parts.length >= 2){
        const who = parts[0].trim().replace(/:$/,'');
        const what = parts.slice(1).join('—').trim();
        return `• ${who}: ${what}`;
      }
      return `• ${line}`;
    }).join('\n') : '• (Add each technician’s update here)';

    const body =
`Huddle Summary — ${shift}
Date/Time: ${now}${site?`\nLocation: ${site}`:''}

Team Updates:
${bul}

Blockers (if any):
• (Add any blockers mentioned here)

Priorities for this shift:
• (Add priorities agreed in huddle here)`.trim();

    huddleOut.textContent = body;
    return body;
  }

  document.getElementById('genHuddle').addEventListener('click', buildHuddle);
  document.getElementById('copyHuddle').addEventListener('click', ()=>{
    copyText(huddleOut.textContent);
  });
  document.getElementById('copyHuddleEmail').addEventListener('click', ()=>{
    const base = buildHuddle();
    const email =
`Huddle Summary

${base}

Regards,
Deskside Support`.trim();
    copyText(email);
  });
  document.getElementById('copyHuddleTeams').addEventListener('click', ()=>{
    const base = buildHuddle();
    const teams =
`Huddle Summary

${base}

(Shared via AI Shift Assistant)`.trim();
    copyText(teams);
  });
  document.getElementById('dlHuddle').addEventListener('click', ()=>{
    download('huddle-summary.md', huddleOut.textContent + '\n');
  });

  // SHIFT HANDOFF LOGIC
  const handoffShift = document.getElementById('handoffShift');
  const handoffSite  = document.getElementById('handoffSite');
  const handoffInput = document.getElementById('handoffInput');
  const handoffMeta  = document.getElementById('handoffMeta');
  const handoffOut   = document.getElementById('handoffOut');

  function buildHandoff(){
    const shift = handoffShift.value;
    const site  = handoffSite.value.trim();
    const raw   = handoffInput.value.trim();
    const now   = fmtNow();

    handoffMeta.textContent = `${now} · ${shift}${site?` · ${site}`:''}`;

    let completed = [];
    let pending   = [];
    let blocked   = [];

    if(raw){
      // Simple parse: look for keywords in each line
      raw.split(/\n+/).map(l=>l.trim()).filter(Boolean).forEach(line=>{
        const low = line.toLowerCase();
        if(low.startsWith('completed:') || low.startsWith('done:')){
          completed.push(line.replace(/^completed:|^done:/i,'').trim());
        } else if(low.startsWith('pending:') || low.startsWith('open:')){
          pending.push(line.replace(/^pending:|^open:/i,'').trim());
        } else if(low.startsWith('blocked:') || low.startsWith('waiting:')){
          blocked.push(line.replace(/^blocked:|^waiting:/i,'').trim());
        } else {
          // If it doesn't match, drop into pending by default
          pending.push(line);
        }
      });
    }

    const body =
`Shift Handoff — ${shift}
Date/Time: ${now}${site?`\nLocation: ${site}`:''}

Work Completed:
${completed.length ? bulletize(completed.join('\n')) : '• (Add completed work items here)'}

Pending / In Progress:
${pending.length ? bulletize(pending.join('\n')) : '• (Add pending items here)'}

Blocked / Waiting On:
${blocked.length ? bulletize(blocked.join('\n')) : '• (Add blockers here)'}

Notes for Next Shift:
• (Add any special instructions or watch-outs here)`.trim();

    handoffOut.textContent = body;
    return body;
  }

  document.getElementById('genHandoff').addEventListener('click', buildHandoff);
  document.getElementById('copyHandoff').addEventListener('click', ()=>{
    copyText(handoffOut.textContent);
  });
  document.getElementById('copyHandoffEmail').addEventListener('click', ()=>{
    const base = buildHandoff();
    const email =
`Shift Handoff

${base}

Regards,
Deskside Support`.trim();
    copyText(email);
  });
  document.getElementById('copyHandoffTeams').addEventListener('click', ()=>{
    const base = buildHandoff();
    const teams =
`Shift Handoff

${base}

(Shared via AI Shift Assistant)`.trim();
    copyText(teams);
  });
  document.getElementById('dlHandoff').addEventListener('click', ()=>{
    download('shift-handoff.md', handoffOut.textContent + '\n');
  });

  // MANAGER SUMMARY LOGIC
  const managerInput = document.getElementById('managerInput');
  const managerMeta  = document.getElementById('managerMeta');
  const managerOut   = document.getElementById('managerOut');

  function buildManager(){
    const raw = managerInput.value.trim();
    const now = fmtNow();
    managerMeta.textContent = now;

    if(!raw){
      const blank =
`Daily Deskside Summary — ${now}

Shift Overview:
• Morning:
• Afternoon:
• Overnight:

Key Themes:
• (Add repeated patterns here)

Blockers & Escalations:
• (Add escalations and blockers here)

VIP / High Priority Items:
• (Add VIP work here)

Ongoing Projects:
• (Add ongoing deskside / infra projects here)

Repeated Issues (Detected Across Shifts):
• (Populate based on handoffs)

Recommendations for Next Shift:
• (Add recommendations here)

Notes:
• (Add any context or notes here)`.trim();
      managerOut.textContent = blank;
      return blank;
    }

    // Split into blocks by blank lines (morning / afternoon / overnight handoffs)
    const blocks = raw.split(/\n\s*\n/).map(b=>b.trim()).filter(Boolean);

    // Simple keyword-based repeated issue detection
    const textLower = raw.toLowerCase();
    const keywords = [
      'network', 'switch port', 'vpn', 'printer', 'imaging',
      'hardware', 'onboarding', 'wifi', 'outage', 'latency'
    ];
    const repeated = [];
    keywords.forEach(k=>{
      const re = new RegExp(k.replace(' ','\\s+'),'g');
      const matches = textLower.match(re);
      if(matches && matches.length >= 2){
        repeated.push({ key:k, count:matches.length });
      }
    });

    const repLines = repeated.length
      ? repeated.map(r=>`• ${capitalize(r.key)} (appears ${r.count} times)`).join('\n')
      : '• (No repeated issues detected by keyword scan)';

    // Build simple "Shift Overview" lines from blocks (best-effort)
    const overviewLines = [];
    if(blocks[0]) overviewLines.push(`• Morning: ${shorten(blocks[0])}`);
    if(blocks[1]) overviewLines.push(`• Afternoon: ${shorten(blocks[1])}`);
    if(blocks[2]) overviewLines.push(`• Overnight: ${shorten(blocks[2])}`);

    const body =
`Daily Deskside Summary — ${now}

Shift Overview:
${overviewLines.length ? overviewLines.join('\n') : '• (Add 1–2 bullets per shift here)'}

Key Themes:
• (Add patterns seen across shifts here)

Blockers & Escalations:
• (Add unresolved issues, escalations, and dependencies here)

VIP / High Priority Items:
• (List VIP users / high-impact work here)

Ongoing Projects:
• (List active deskside projects: refreshes, rollouts, migrations, etc.)

Repeated Issues (Detected Across Shifts):
${repLines}

Recommendations for Next Shift:
• (Add what the next shift should focus on)

Notes:
• (Add any extra context, volume notes, staffing, etc.)`.trim();

    managerOut.textContent = body;
    return body;
  }

  function capitalize(s){
    return s.charAt(0).toUpperCase() + s.slice(1);
  }
  function shorten(text){
    // Take first line, truncate to ~80 chars
    const firstLine = text.split('\n')[0].trim();
    return firstLine.length > 80 ? firstLine.slice(0,77) + '...' : firstLine;
  }

  document.getElementById('genManager').addEventListener('click', buildManager);
  document.getElementById('copyManager').addEventListener('click', ()=>{
    copyText(managerOut.textContent);
  });
  document.getElementById('copyManagerEmail').addEventListener('click', ()=>{
    const base = buildManager();
    const email =
`Daily Deskside Summary

${base}

Regards,
Deskside Support`.trim();
    copyText(email);
  });
  document.getElementById('copyManagerTeams').addEventListener('click', ()=>{
    const base = buildManager();
    const teams =
`Daily Deskside Summary

${base}

(Shared via AI Shift Assistant)`.trim();
    copyText(teams);
  });
  document.getElementById('dlManager').addEventListener('click', ()=>{
    download('daily-deskside-summary.md', managerOut.textContent + '\n');
  });

})();
</script>
</body>
</html>
